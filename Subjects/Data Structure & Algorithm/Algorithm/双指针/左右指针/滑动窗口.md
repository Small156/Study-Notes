# 滑动窗口

滑动窗口算法能在给定的特定窗口大小的数组或字符串上执行操作，而不在整个字符串和数组上。故该算法可以降低循环的嵌套深度，以减少时间复杂度。

滑动窗口主要用于解决：数组 / 字符串的 **子元素** 问题。

目录：

- [滑动窗口](#滑动窗口)
  - [代码模板](#代码模板)
    - [基本框架](#基本框架)
  - [寻找子串问题](#寻找子串问题)
    - [模板 Ⅰ](#模板-ⅰ)
    - [模板 Ⅱ](#模板-ⅱ)
    - [模板 Ⅲ](#模板-ⅲ)
  - [参考链接](#参考链接)

## 代码模板

### 基本框架

```C++
// 1. 初始化窗口指针
int left = 0, right = 0;

// 2. 循环 1 - 控制窗口右边界
while (right < s.size()) {
  
    // 3. 增大窗口，并进行相关数据更新
    windows.add(s[right]);
    ++right;
    ...

    // 4. 循环 2 - 控制窗口是否需要缩小
    while (windows needs shrink) {

        // 5. 缩小窗口，并进行相关数据更新
        windows.remove(s[left]);
        ++left;
        ...
    }
}
```

```C++
void slidingWindow(string s, string t) {
    // eg 1 初始化 需求目标、当前窗口 map
    unordered_map<char, int> need, window;
    for (char c : t) ++need[c];

    /* eg 2 当字符集数量确定且较小时，可考虑采用数组代替 map，如：限定为小写字母
    int need[26] = {0}, window[26] = {0};
    for (char c : t) ++need[c - 'a']; */

    /* 细节注意 */
    // 初始化窗口双指针 = 0，表示 左闭右开 区间 [left, right)，即初始的空窗口
    int left = 0, right = 0;

    // 用于记录满足 need 需求的数量
    int valid = 0;
    
    while (right < s.size()) {

        /* 细节注意 */
        /* 窗口指针左闭右开，初始化为空窗口。故需要先向窗口插入元素，再右移窗口，
        否则，可能导致最后右移窗口后，数组下标越界 */

        // c 是将移入窗口的字符
        char c = s[right];

        // 右移窗口
        ++right;

        /* 进行窗口内数据的一系列更新
            1. 与 需求目标 - need 比较，判断是否有数据需要更新
            2. 更新 当前窗口 - window
            3. 与 需求目标 - need 比较，判断是否满足需求
            4. 若满足需求，则更新 valid */
        ...

        /* debug - 打印当前窗口区间 
        printf("window: [%d, %d)\n", left, right); */
        
        while (window needs shrink) {

            // d 是将要移出窗口的字符
            char d = s[left];
            
            // 左移窗口
            ++left;
            
            /* 进行窗口内数据的一系列更新
                1. 与 需求目标 - need 比较，判断是否有数据需要更新
                2. 更新 当前窗口 - window
                3. 与 需求目标 - need 比较，判断是否变化为不满足需求
                4. 若不满足需求，则更新 valid */
            ...
        }
    }
}
```

基于模板的思考：

1、当移动 right 扩大窗口，即加入字符时，应该更新哪些数据？

2、什么条件下，窗口应该暂停扩大，开始移动 left 缩小窗口？

3、当移动 left 缩小窗口，即移出字符时，应该更新哪些数据？

4、我们要的结果应该在扩大窗口时还是缩小窗口时进行更新？


## 寻找子串问题

典型例题：

* [76. 最小覆盖子串](https://leetcode-cn.com/problems/minimum-window-substring/)


### 模板 Ⅰ

### 模板 Ⅱ

### 模板 Ⅲ



## 参考链接

* [滑动窗口技巧- labuladong的算法小抄](https://labuladong.gitbook.io/algo/mu-lu-ye-1/mu-lu-ye-3/hua-dong-chuang-kou-ji-qiao-jin-jie)
* [什么是「滑动窗口算法」（sliding window algorithm），有哪些应用场景？](https://www.zhihu.com/question/314669016)
* [滑动窗口算法基本原理与实践](https://www.cnblogs.com/huansky/p/13488234.html)

